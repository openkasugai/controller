---
weight: 2
title: "Add Requirements"
---
# Add Requirements
## About This Procedure
* This document describes the modifications to the Kubeflow Pipelines SDK required to run the Custom Kubeflow SDK.

## Changes Made
* Create new `requirements.in` and `requirements.txt` files, and modify them to reference a custom version of the `kfp-pipeline-spec` Python package used during Kubeflow Pipelines SDK execution, excluding it from pip dependencies.

## Prerequisites
* Ensure the following steps have been completed before performing this procedure.
    * [Add OpenKasugai Library](../add-dci-library)

## Procedure
1. Create a new `requirements.in` file.
```
$ vi sdk/python/kfp/requirements.in
```

Edit as follows.
```python
# After any updates to this file, requirements.txt should be regenerated running
# the following in this folder:
# pip-compile --no-emit-index-url requirements.in

click>=8.0.0,<9
docstring-parser>=0.7.3,<1
# Pin google-api-core version for the bug fixing in 1.31.5
# https://github.com/googleapis/python-api-core/releases/tag/v1.31.5
google-api-core>=1.31.5,<3.0.0dev,!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.0
google-auth>=1.6.1,<3
# https://github.com/googleapis/python-storage/blob/main/CHANGELOG.md#221-2022-03-15
google-cloud-storage>=2.2.1,<3
# pin kfp-pipeline-spec to an exact version, since this is the contract between a given KFP SDK version and the BE. we don't want old version of the SDK to write new fields and to have the BE reject the new unsupported field (even if the new field backward compatible from a proto perspective)
# kfp-pipeline-spec==0.2.2
# Update the upper version whenever a new major version of the
# kfp-server-api package is released.
# Update the lower version when kfp sdk depends on new apis/fields in
# kfp-server-api.
kfp-server-api>=2.0.0,<2.1.0
kubernetes>=8.0.0,<27
protobuf>=3.13.0,<4
PyYAML>=5.3,<7
requests-toolbelt>=0.8.0,<1
tabulate>=0.8.6,<1
urllib3<2.0.0

## standard library backports ##
typing-extensions>=3.7.4,<5; python_version<"3.9"
```

2. Create a new `requirements.txt` file.
```
$ vi sdk/python/kfp/requirements.txt
```

Edit as follows.
```python
#
# This file is autogenerated by pip-compile with Python 3.8
# by the following command:
#
#    pip-compile --no-emit-index-url requirements.in
#
cachetools==5.2.0
    # via google-auth
certifi==2022.6.15
    # via
    #   kfp-server-api
    #   kubernetes
    #   requests
charset-normalizer==2.1.1
    # via requests
click==8.1.3
    # via -r requirements.in
docstring-parser==0.14.1
    # via -r requirements.in
google-api-core==2.8.2
    # via
    #   -r requirements.in
    #   google-cloud-core
    #   google-cloud-storage
google-auth==2.11.0
    # via
    #   -r requirements.in
    #   google-api-core
    #   google-cloud-core
    #   google-cloud-storage
    #   kubernetes
google-cloud-core==2.3.2
    # via google-cloud-storage
google-cloud-storage==2.5.0
    # via -r requirements.in
google-crc32c==1.5.0
    # via google-resumable-media
google-resumable-media==2.3.3
    # via google-cloud-storage
googleapis-common-protos==1.56.4
    # via google-api-core
idna==3.3
    # via requests
# kfp-pipeline-spec==0.2.2
    # via -r requirements.in
kfp-server-api==2.0.0-rc.1
    # via -r requirements.in
kubernetes==23.6.0
    # via -r requirements.in
oauthlib==3.2.0
    # via requests-oauthlib
protobuf==3.20.1
    # via
    #   -r requirements.in
    #   google-api-core
    #   googleapis-common-protos
    #   kfp-pipeline-spec
pyasn1==0.4.8
    # via
    #   pyasn1-modules
    #   rsa
pyasn1-modules==0.2.8
    # via google-auth
python-dateutil==2.8.2
    # via
    #   kfp-server-api
    #   kubernetes
pyyaml==5.4.1
    # via
    #   -r requirements.in
    #   kubernetes
requests==2.28.1
    # via
    #   google-api-core
    #   google-cloud-storage
    #   kubernetes
    #   requests-oauthlib
    #   requests-toolbelt
requests-oauthlib==1.3.1
    # via kubernetes
requests-toolbelt==0.9.1
    # via -r requirements.in
rsa==4.9
    # via google-auth
six==1.16.0
    # via
    #   google-auth
    #   kfp-server-api
    #   kubernetes
    #   python-dateutil
tabulate==0.8.10
    # via -r requirements.in
typing-extensions==4.5.0 ; python_version < "3.9"
    # via -r requirements.in
urllib3==1.26.12
    # via
    #   -r requirements.in
    #   kfp-server-api
    #   kubernetes
    #   requests
websocket-client==1.4.0
    # via kubernetes

# The following packages are considered to be unsafe in a requirements file:
# setuptools
```

## Next Procedure
[Modify pipeline_spec.proto](../modify-pipeline_spec.proto)